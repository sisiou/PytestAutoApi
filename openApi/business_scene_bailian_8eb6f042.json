{
  "business_scenes": {
    "title": "业务场景总览",
    "description": "基于接口功能的核心业务场景汇总",
    "scenes": [
      {
        "scene_id": "SCENE_IM_CREATE_MESSAGE",
        "scene_name": "发送即时消息",
        "scene_description": "通过机器人向指定用户或群组发送各类消息（如文本、卡片、文件等），用于系统通知、审批提醒、任务更新等自动化沟通场景。适用于企业内部运营、IT运维、HR通知等需要主动推送信息的业务流程。",
        "related_apis": [
          "/open-apis/im/v1/messages"
        ],
        "api_call_combo": [
          {
            "api_path": "/open-apis/im/v1/messages",
            "call_order": 1,
            "call_condition": "应用已开启机器人能力，且目标用户在机器人的可用范围内；若为群聊，机器人已在群内并有发言权限",
            "expected_result": "返回200状态码，成功创建消息并返回message_id"
          }
        ],
        "test_focus": [
          "消息类型参数合法性校验",
          "接收者ID与ID类型的匹配性",
          "权限控制（机器人能力、可用范围）",
          "消息内容长度限制（文本150KB，卡片30KB）",
          "uuid去重机制验证",
          "敏感词和审计规则触发检测"
        ],
        "exception_scenarios": [
          "未开启机器人能力（错误码230006）",
          "目标用户不在可用范围（错误码230013）",
          "机器人不在群内（错误码230002）",
          "群组禁言或无发言权限（错误码230018）",
          "消息频率超限（错误码230020）",
          "消息内容含敏感信息（错误码230022）",
          "跨租户单聊禁止（错误码230038）"
        ],
        "priority": "P0"
      },
      {
        "scene_id": "SCENE_CONTACT_CREATE_USER",
        "scene_name": "创建新员工用户",
        "scene_description": "在企业通讯录中创建新员工账号，用于入职流程自动化。支持设置姓名、手机号、邮箱、部门、岗位、工号等信息，实现HR系统与飞书组织架构的同步，提升入职效率。",
        "related_apis": [
          "/open-apis/contact/v3/users"
        ],
        "api_call_combo": [
          {
            "api_path": "/open-apis/contact/v3/users",
            "call_order": 1,
            "call_condition": "应用具有contact:contact权限，且操作的部门在应用的通讯录权限范围内",
            "expected_result": "返回200状态码，成功创建用户并返回user_id、open_id等信息"
          }
        ],
        "test_focus": [
          "必填字段校验（name、mobile）",
          "手机号/邮箱唯一性检查",
          "部门ID有效性及权限范围",
          "自定义字段配置正确性",
          "client_token幂等性处理",
          "席位分配与企业配额限制"
        ],
        "exception_scenarios": [
          "缺少contact:contact权限（错误码40004）",
          "手机号已存在（错误码41001）",
          "邮箱已存在（错误码41002）",
          "部门超出权限范围（错误码40004）",
          "未传入手机号或邮箱（错误码41009）",
          "企业人数已达上限（错误码41007/41008）",
          "直接主管已离职（错误码44021）"
        ],
        "priority": "P0"
      },
      {
        "scene_id": "SCENE_CALENDAR_CREATE_SHARED",
        "scene_name": "创建共享日历",
        "scene_description": "为当前身份（应用或用户）创建一个共享日历，用于项目进度跟踪、会议室资源管理、团队排班等协作场景。支持设置日历标题、描述、颜色和公开范围，便于团队成员协同查看和管理日程。",
        "related_apis": [
          "/open-apis/calendar/v4/calendars"
        ],
        "api_call_combo": [
          {
            "api_path": "/open-apis/calendar/v4/calendars",
            "call_order": 1,
            "call_condition": "使用tenant_access_token或user_access_token调用，且应用已开启机器人能力",
            "expected_result": "返回200状态码，成功创建日历并返回calendar_id、summary等信息"
          }
        ],
        "test_focus": [
          "token类型合法性（tenant/user access token）",
          "权限校验（calendar:calendar:create）",
          "日历名称长度限制（255字符）",
          "公开范围取值有效性",
          "颜色值格式合规性",
          "订阅数量上限（1000个日历）"
        ],
        "exception_scenarios": [
          "应用bot_id未找到（错误码190007）",
          "请求参数无效（错误码190002）",
          "应用频率超限（错误码190005）",
          "当前身份已离职或不存在（错误码195100）",
          "方法频率超限（错误码190004）"
        ],
        "priority": "P1"
      },
      {
        "scene_id": "SCENE_AUTHEN_GET_USER_INFO",
        "scene_name": "获取用户登录信息",
        "scene_description": "通过user_access_token获取当前登录用户的详细信息，包括姓名、头像、open_id、union_id、手机号、邮箱等，用于实现单点登录（SSO）、用户身份识别、个性化主页展示等功能。",
        "related_apis": [
          "/open-apis/authen/v1/user_info"
        ],
        "api_call_combo": [
          {
            "api_path": "/open-apis/authen/v1/user_info",
            "call_order": 1,
            "call_condition": "提供有效的user_access_token",
            "expected_result": "返回200状态码，成功获取用户基本信息"
          }
        ],
        "test_focus": [
          "user_access_token有效性验证",
          "敏感字段权限控制（如手机号、邮箱需单独授权）",
          "用户状态判断（是否离职、冻结）",
          "多端登录一致性",
          "响应数据完整性"
        ],
        "exception_scenarios": [
          "user_access_token无效（错误码20005）",
          "用户不存在（错误码20008）",
          "用户已离职（错误码20021）",
          "用户被冻结（错误码20022）",
          "用户未完成注册（错误码20023）",
          "系统内部错误（错误码20050）"
        ],
        "priority": "P0"
      }
    ]
  }
}