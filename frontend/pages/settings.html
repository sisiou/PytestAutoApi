<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统设置 - 智能自动化测试平台</title>
    
    <!-- Bootstrap CSS -->
    <link href="../vendor/bootstrap/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../vendor/fontawesome/css/all.min.css">
    <!-- 自定义样式 -->
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/components/settings.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="../index.html">
                <i class="fas fa-robot me-2"></i>智能自动化测试平台
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">
                            <i class="fas fa-tachometer-alt me-1"></i>仪表盘
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="test-center.html">
                            <i class="fas fa-flask me-1"></i>测试中心
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="coverage.html">
                            <i class="fas fa-chart-pie me-1"></i>覆盖度报告
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="suggestions.html">
                            <i class="fas fa-lightbulb me-1"></i>智能建议
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="settings.html">
                            <i class="fas fa-cog me-1"></i>系统设置
                        </a>
                    </li>
                </ul>
                
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle me-1"></i>管理员
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#"><i class="fas fa-user me-1"></i>个人资料</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-1"></i>个人设置</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-1"></i>退出登录</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <div class="container-fluid">
        <div class="row">
            <!-- 侧边栏 -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#general" data-bs-toggle="pill">
                                <i class="fas fa-cogs me-2"></i>常规设置
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#api" data-bs-toggle="pill">
                                <i class="fas fa-plug me-2"></i>API配置
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#test" data-bs-toggle="pill">
                                <i class="fas fa-vial me-2"></i>测试配置
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#notification" data-bs-toggle="pill">
                                <i class="fas fa-bell me-2"></i>通知设置
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#security" data-bs-toggle="pill">
                                <i class="fas fa-shield-alt me-2"></i>安全设置
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#backup" data-bs-toggle="pill">
                                <i class="fas fa-database me-2"></i>备份与恢复
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- 主内容 -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">系统设置</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="resetBtn">
                                <i class="fas fa-undo me-1"></i>重置
                            </button>
                            <button type="button" class="btn btn-sm btn-primary" id="saveBtn">
                                <i class="fas fa-save me-1"></i>保存设置
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 设置内容区 -->
                <div class="tab-content" id="settingsTabContent">
                    <!-- 常规设置 -->
                    <div class="tab-pane fade show active" id="general">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-cogs me-2"></i>常规设置
                                </h5>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="systemName" class="form-label">系统名称</label>
                                        <input type="text" class="form-control" id="systemName" value="智能自动化测试平台">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="systemDescription" class="form-label">系统描述</label>
                                        <textarea class="form-control" id="systemDescription" rows="3">基于AI的API自动化测试平台，支持API文档解析、测试用例生成、覆盖度分析和智能建议。</textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="systemVersion" class="form-label">系统版本</label>
                                        <input type="text" class="form-control" id="systemVersion" value="1.0.0" readonly>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultLanguage" class="form-label">默认语言</label>
                                        <select class="form-select" id="defaultLanguage">
                                            <option value="zh-CN" selected>简体中文</option>
                                            <option value="en-US">English</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="timezone" class="form-label">时区</label>
                                        <select class="form-select" id="timezone">
                                            <option value="Asia/Shanghai" selected>Asia/Shanghai (UTC+8)</option>
                                            <option value="UTC">UTC (UTC+0)</option>
                                            <option value="America/New_York">America/New_York (UTC-5)</option>
                                            <option value="Europe/London">Europe/London (UTC+0)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="theme" class="form-label">界面主题</label>
                                        <select class="form-select" id="theme">
                                            <option value="light" selected>浅色主题</option>
                                            <option value="dark">深色主题</option>
                                            <option value="auto">跟随系统</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="enableDebug" checked>
                                        <label class="form-check-label" for="enableDebug">启用调试模式</label>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- API配置 -->
                    <div class="tab-pane fade" id="api">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-plug me-2"></i>API配置
                                </h5>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="apiTimeout" class="form-label">API请求超时时间（秒）</label>
                                        <input type="number" class="form-control" id="apiTimeout" value="30" min="1" max="300">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="maxConcurrentRequests" class="form-label">最大并发请求数</label>
                                        <input type="number" class="form-control" id="maxConcurrentRequests" value="10" min="1" max="100">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="retryAttempts" class="form-label">失败重试次数</label>
                                        <input type="number" class="form-control" id="retryAttempts" value="3" min="0" max="10">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="retryDelay" class="form-label">重试间隔（秒）</label>
                                        <input type="number" class="form-control" id="retryDelay" value="1" min="0" max="60">
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="followRedirects" checked>
                                        <label class="form-check-label" for="followRedirects">跟随重定向</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="verifySsl" checked>
                                        <label class="form-check-label" for="verifySsl">验证SSL证书</label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="customHeaders" class="form-label">自定义请求头（JSON格式）</label>
                                        <textarea class="form-control" id="customHeaders" rows="5">{
  "User-Agent": "PytestAutoApi/1.0.0",
  "Accept": "application/json"
}</textarea>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 测试配置 -->
                    <div class="tab-pane fade" id="test">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-vial me-2"></i>测试配置
                                </h5>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="testTimeout" class="form-label">测试用例超时时间（秒）</label>
                                        <input type="number" class="form-control" id="testTimeout" value="60" min="1" max="3600">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="testParallelism" class="form-label">测试并行度</label>
                                        <input type="number" class="form-control" id="testParallelism" value="4" min="1" max="16">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="testRetryAttempts" class="form-label">测试失败重试次数</label>
                                        <input type="number" class="form-control" id="testRetryAttempts" value="1" min="0" max="5">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="coverageThreshold" class="form-label">覆盖度阈值（%）</label>
                                        <input type="number" class="form-control" id="coverageThreshold" value="80" min="0" max="100">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="testDataPath" class="form-label">测试数据存储路径</label>
                                        <input type="text" class="form-control" id="testDataPath" value="./data">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="testReportPath" class="form-label">测试报告存储路径</label>
                                        <input type="text" class="form-control" id="testReportPath" value="./report">
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="generateAllureReport" checked>
                                        <label class="form-check-label" for="generateAllureReport">生成Allure报告</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="generateHtmlReport" checked>
                                        <label class="form-check-label" for="generateHtmlReport">生成HTML报告</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="autoGenerateSuggestions" checked>
                                        <label class="form-check-label" for="autoGenerateSuggestions">自动生成智能建议</label>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 通知设置 -->
                    <div class="tab-pane fade" id="notification">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-bell me-2"></i>通知设置
                                </h5>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="enableEmailNotification" checked>
                                        <label class="form-check-label" for="enableEmailNotification">启用邮件通知</label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="smtpServer" class="form-label">SMTP服务器</label>
                                        <input type="text" class="form-control" id="smtpServer" value="smtp.example.com">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="smtpPort" class="form-label">SMTP端口</label>
                                        <input type="number" class="form-control" id="smtpPort" value="587">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="smtpUsername" class="form-label">SMTP用户名</label>
                                        <input type="text" class="form-control" id="smtpUsername">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="smtpPassword" class="form-label">SMTP密码</label>
                                        <input type="password" class="form-control" id="smtpPassword">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="notificationRecipients" class="form-label">通知接收人（多个用逗号分隔）</label>
                                        <input type="text" class="form-control" id="notificationRecipients" value="admin@example.com">
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="enableDingTalkNotification">
                                        <label class="form-check-label" for="enableDingTalkNotification">启用钉钉通知</label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="dingTalkWebhook" class="form-label">钉钉Webhook URL</label>
                                        <input type="text" class="form-control" id="dingTalkWebhook">
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="enableWeChatNotification">
                                        <label class="form-check-label" for="enableWeChatNotification">启用企业微信通知</label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="weChatWebhook" class="form-label">企业微信Webhook URL</label>
                                        <input type="text" class="form-control" id="weChatWebhook">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 安全设置 -->
                    <div class="tab-pane fade" id="security">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-shield-alt me-2"></i>安全设置
                                </h5>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="sessionTimeout" class="form-label">会话超时时间（分钟）</label>
                                        <input type="number" class="form-control" id="sessionTimeout" value="30" min="5" max="1440">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="passwordMinLength" class="form-label">密码最小长度</label>
                                        <input type="number" class="form-control" id="passwordMinLength" value="8" min="4" max="32">
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="requireUppercase" checked>
                                        <label class="form-check-label" for="requireUppercase">密码需要包含大写字母</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="requireLowercase" checked>
                                        <label class="form-check-label" for="requireLowercase">密码需要包含小写字母</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="requireNumbers" checked>
                                        <label class="form-check-label" for="requireNumbers">密码需要包含数字</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="requireSpecialChars" checked>
                                        <label class="form-check-label" for="requireSpecialChars">密码需要包含特殊字符</label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="maxLoginAttempts" class="form-label">最大登录尝试次数</label>
                                        <input type="number" class="form-control" id="maxLoginAttempts" value="5" min="1" max="10">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="lockoutDuration" class="form-label">账户锁定时间（分钟）</label>
                                        <input type="number" class="form-control" id="lockoutDuration" value="15" min="1" max="1440">
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="enableTwoFactorAuth">
                                        <label class="form-check-label" for="enableTwoFactorAuth">启用双因素认证</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="logSecurityEvents" checked>
                                        <label class="form-check-label" for="logSecurityEvents">记录安全事件日志</label>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 备份与恢复 -->
                    <div class="tab-pane fade" id="backup">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-database me-2"></i>备份与恢复
                                </h5>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="backupPath" class="form-label">备份存储路径</label>
                                        <input type="text" class="form-control" id="backupPath" value="./backup">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="backupRetention" class="form-label">备份保留天数</label>
                                        <input type="number" class="form-control" id="backupRetention" value="30" min="1" max="365">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="backupSchedule" class="form-label">备份计划</label>
                                        <select class="form-select" id="backupSchedule">
                                            <option value="disabled">禁用</option>
                                            <option value="daily" selected>每日</option>
                                            <option value="weekly">每周</option>
                                            <option value="monthly">每月</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="backupTime" class="form-label">备份时间</label>
                                        <input type="time" class="form-control" id="backupTime" value="02:00">
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="compressBackup" checked>
                                        <label class="form-check-label" for="compressBackup">压缩备份文件</label>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="encryptBackup">
                                        <label class="form-check-label" for="encryptBackup">加密备份文件</label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="backupEncryptionKey" class="form-label">备份加密密钥</label>
                                        <input type="password" class="form-control" id="backupEncryptionKey">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="remoteBackupUrl" class="form-label">远程备份URL</label>
                                        <input type="text" class="form-control" id="remoteBackupUrl" placeholder="例如：ftp://backup.example.com/backup">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="remoteBackupUsername" class="form-label">远程备份用户名</label>
                                        <input type="text" class="form-control" id="remoteBackupUsername">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="remoteBackupPassword" class="form-label">远程备份密码</label>
                                        <input type="password" class="form-control" id="remoteBackupPassword">
                                    </div>
                                    
                                    <div class="d-flex justify-content-between">
                                        <button type="button" class="btn btn-primary" id="backupNowBtn">
                                            <i class="fas fa-download me-1"></i>立即备份
                                        </button>
                                        <button type="button" class="btn btn-success" id="restoreBtn">
                                            <i class="fas fa-upload me-1"></i>恢复备份
                                        </button>
                                    </div>
                                    
                                    <div class="mt-4">
                                        <h6>设置导入导出</h6>
                                        <div class="import-export-area" id="importExportArea">
                                            <i class="fas fa-file-import import-export-icon"></i>
                                            <p class="import-export-text">拖拽配置文件到此处或点击选择文件</p>
                                            <p class="import-export-hint">支持 .json 格式的配置文件</p>
                                            <input type="file" id="settingsFileInput" accept=".json" style="display: none;">
                                        </div>
                                        
                                        <div class="d-flex justify-content-between mt-3">
                                            <button type="button" class="btn btn-outline-primary" id="exportSettingsBtn">
                                                <i class="fas fa-file-export me-1"></i>导出设置
                                            </button>
                                            <button type="button" class="btn btn-outline-success" id="importSettingsBtn">
                                                <i class="fas fa-file-import me-1"></i>导入设置
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 恢复备份模态框 -->
    <div class="modal fade" id="restoreModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">恢复备份</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="backupFile" class="form-label">选择备份文件</label>
                        <input type="file" class="form-control" id="backupFile" accept=".zip,.tar.gz">
                    </div>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>警告：</strong>恢复备份将覆盖当前所有数据，请确保已备份当前数据。
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-danger" id="confirmRestoreBtn">确认恢复</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="../vendor/bootstrap/bootstrap.bundle.min.js"></script>
    <!-- API配置 -->
    <script src="../js/config/api-config.js?v=20251205"></script>
    <!-- 主脚本 -->
    <script src="../js/main.js"></script>
    <!-- 设置页面脚本 -->
    <script src="../js/components/settings.js"></script>
</body>
</html>